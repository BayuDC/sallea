const stopAnimBubble=e=>{e.addEventListener("animationend",e=>{e.stopPropagation()})},animToggle=(e,t,n)=>{if(e.classList.contains("active"))return t();n()},clickOnEnter=t=>{t?.addEventListener("keyup",e=>{"Enter"==e.key&&t.click()})},gallery=document.getElementById("gallery"),galleryResize=()=>{var e=gallery?.offsetWidth;gallery?.setAttribute("style",`column-count: ${Math.floor(e/300)}`)};galleryResize(),window.addEventListener("resize",galleryResize),gallery&&[...gallery.children].forEach(t=>{t.addEventListener("keyup",e=>{"Enter"==e.key&&t.children[1].click()})});const btnRefresh=document.getElementById("btn-refresh");btnRefresh?.addEventListener("click",()=>{btnRefresh.classList.add("click")}),btnRefresh?.addEventListener("animationend",e=>{btnRefresh.classList.remove("click")}),clickOnEnter(btnRefresh);const btnMenu=document.getElementById("btn-menu"),menu=document.getElementById("menu");btnMenu?.addEventListener("click",()=>{animToggle(menu,()=>menu.classList.add("hide"),()=>menu.classList.add("show"))}),clickOnEnter(btnMenu),menu?.addEventListener("animationend",()=>{const e=t=>{[...menu.children].forEach(e=>{e.classList.contains("sub-item")||e.setAttribute("tabIndex",t)})};menu.classList.remove("show","hide"),animToggle(menu,()=>{menu.classList.remove("active"),e(-1)},()=>{menu.classList.add("active"),e(0)})});const subMenus=document.getElementsByClassName("sub-menu");[...subMenus].forEach(n=>{const s=n.nextElementSibling,i=n.children[0];n.addEventListener("click",()=>{animToggle(n,()=>{s.classList.add("hide"),i.classList.add("end")},()=>{s.classList.add("show"),i.classList.add("start")})}),clickOnEnter(n),n.addEventListener("animationend",e=>{const t=t=>[...s.children].forEach(e=>e.setAttribute("tabIndex",t));i.classList.remove("start","end"),s.classList.remove("show","hide"),animToggle(n,()=>{s.classList.remove("active"),n.classList.remove("active"),t(-1)},()=>{s.classList.add("active"),n.classList.add("active"),t(0)})}),stopAnimBubble(n),stopAnimBubble(s)});